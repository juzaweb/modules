function ajaxRequest(e,t=null,n={}){let a=$.ajax({type:n.method||"POST",url:e,dataType:n.dataType||"json",data:t,cache:!1,async:void 0===n.async||n.async});return a.done((function(e){n.callback&&n.callback(e)})),a.fail((function(e){n.failCallback&&n.failCallback(e)})),a.responseJSON}function replace_template(e,t){return e.replace(/{(\w*)}/g,(function(e,n){return t.hasOwnProperty(n)?t[n]:""}))}function process_each(e,t,n,a={}){let s=0,o=e.length;!function i(){let r=t.call(e[s++]);s<o?setTimeout(i,n):a.completeCallback&&a.completeCallback(r)}()}function random_string(e){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a=n.length;for(let s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*a));return t}function toastr_message(e,t,n=null){!0===t?toastr.success(e,n||juzaweb.lang.successfully+" !!"):toastr.error(e,n||juzaweb.lang.error+" !!")}function confirm_message(e,t,n="",a="warning"){Swal.fire({title:n,text:e,type:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:juzaweb.lang.yes+"!",cancelButtonText:juzaweb.lang.cancel+"!"}).then((e=>{t(e.value)}))}function get_message_response(e){if("string"==typeof e||e instanceof String)return{status:!1,message:e};if(e.data)return!!e.data.message&&{status:e.status,message:e.data.message};if(e.responseJSON){if(e.responseJSON.errors){let t="";return $.each(e.responseJSON.errors,(function(e,n){return t=n[0],!1})),{status:!1,message:t}}if(e.responseJSON.message)return{status:!1,message:e.responseJSON.message}}return e.message?{status:!1,message:e.message.message}:void 0}function show_message(e,t=!1,n=null){let a=get_message_response(e);if(!a)return;let s="undefined"==typeof juzaweb?"Close":juzaweb?.lang?.close||"Close",o=`<div class="alert alert-${a.status?"success":"danger"} jw-message">\n        <button type="button" class="close" data-dismiss="alert" aria-label="${s}">\n            <span aria-hidden="true">&times;</span>\n        </button>\n\n        ${a.status?'<i class="fa fa-check"></i>':'<i class="fa fa-times"></i>'} ${a.message}\n    </div>`,i=$("#jquery-message");n&&n.find(".form-mesage").length>0&&(i=n.find(".form-mesage")),t?i.append(o):i.html(o)}function show_notify(e){let t=get_message_response(e);t&&toastr_message(t.message,t.status)}function htmlspecialchars(e){return(e=String(e)).replace("&","&amp;").replace('"',"&quot;").replace("'","&#039;").replace("<","&lt;").replace(">","&gt;")}function toggle_global_loading(e,t=300){e?$("#admin-overlay").fadeIn(300):setTimeout((function(){$("#admin-overlay").fadeOut(300)}),t)}function generate_uuid(){let e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){let a=16*Math.random();return e>0?(a=(e+a)%16|0,e=Math.floor(e/16)):(a=(t+a)%16|0,t=Math.floor(t/16)),("x"===n?a:3&a|8).toString(16)}))}let grecaptchaWidget,grecaptchaWidgetResolver;!function(e){e(["jquery"],(function(e){return function(){function t(t,n){return t||(t=i()),(c=e("#"+t.containerId)).length||n&&(c=function(t){return(c=e("<div/>").attr("id",t.containerId).addClass(t.positionClass)).appendTo(e(t.target)),c}(t)),c}function n(t){for(var n=c.children(),s=n.length-1;s>=0;s--)a(e(n[s]),t)}function a(t,n,a){var s=!(!a||!a.force)&&a.force;return!(!t||!s&&0!==e(":focus",t).length||(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){r(t)}}),0))}function s(e){l&&l(e)}function o(n){function a(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(t){var n=t&&!1!==m.closeMethod?m.closeMethod:m.hideMethod,a=t&&!1!==m.closeDuration?m.closeDuration:m.hideDuration,o=t&&!1!==m.closeEasing?m.closeEasing:m.hideEasing;if(!e(":focus",b).length||t)return clearTimeout(C.intervalId),b[n]({duration:a,easing:o,complete:function(){r(b),clearTimeout(h),m.onHidden&&"hidden"!==T.state&&m.onHidden(),T.state="hidden",T.endTime=new Date,s(T)}})}function l(){(m.timeOut>0||m.extendedTimeOut>0)&&(h=setTimeout(o,m.extendedTimeOut),C.maxHideTime=parseFloat(m.extendedTimeOut),C.hideEta=(new Date).getTime()+C.maxHideTime)}function f(){clearTimeout(h),C.hideEta=0,b.stop(!0,!0)[m.showMethod]({duration:m.showDuration,easing:m.showEasing})}function p(){var e=(C.hideEta-(new Date).getTime())/C.maxHideTime*100;w.width(e+"%")}var m=i(),g=n.iconClass||m.iconClass;if(void 0!==n.optionsOverride&&(m=e.extend(m,n.optionsOverride),g=n.optionsOverride.iconClass||g),!function(e,t){if(e.preventDuplicates){if(t.message===u)return!0;u=t.message}return!1}(m,n)){d++,c=t(m,!0);var h=null,b=e("<div/>"),v=e("<div/>"),x=e("<div/>"),w=e("<div/>"),y=e(m.closeHtml),C={intervalId:null,hideEta:null,maxHideTime:null},T={toastId:d,state:"visible",startTime:new Date,options:m,map:n};return n.iconClass&&b.addClass(m.toastClass).addClass(g),function(){if(n.title){var e=n.title;m.escapeHtml&&(e=a(n.title)),v.append(e).addClass(m.titleClass),b.append(v)}}(),function(){if(n.message){var e=n.message;m.escapeHtml&&(e=a(n.message)),x.append(e).addClass(m.messageClass),b.append(x)}}(),m.closeButton&&(y.addClass(m.closeClass).attr("role","button"),b.prepend(y)),m.progressBar&&(w.addClass(m.progressClass),b.prepend(w)),m.rtl&&b.addClass("rtl"),m.newestOnTop?c.prepend(b):c.append(b),function(){var e="";switch(n.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}b.attr("aria-live",e)}(),b.hide(),b[m.showMethod]({duration:m.showDuration,easing:m.showEasing,complete:m.onShown}),m.timeOut>0&&(h=setTimeout(o,m.timeOut),C.maxHideTime=parseFloat(m.timeOut),C.hideEta=(new Date).getTime()+C.maxHideTime,m.progressBar&&(C.intervalId=setInterval(p,10))),m.closeOnHover&&b.hover(f,l),!m.onclick&&m.tapToDismiss&&b.click(o),m.closeButton&&y&&y.click((function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),m.onCloseClick&&m.onCloseClick(e),o(!0)})),m.onclick&&b.click((function(e){m.onclick(e),o()})),s(T),m.debug&&console&&console.log(T),b}}function i(){return e.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},p.options)}function r(e){c||(c=t()),e.is(":visible")||(e.remove(),e=null,0===c.children().length&&(c.remove(),u=void 0))}var c,l,u,d=0,f={error:"error",info:"info",success:"success",warning:"warning"},p={clear:function(e,s){var o=i();c||t(o),a(e,o,s)||n(o)},remove:function(n){var a=i();return c||t(a),n&&0===e(":focus",n).length?void r(n):void(c.children().length&&c.remove())},error:function(e,t,n){return o({type:f.error,iconClass:i().iconClasses.error,message:e,optionsOverride:n,title:t})},getContainer:t,info:function(e,t,n){return o({type:f.info,iconClass:i().iconClasses.info,message:e,optionsOverride:n,title:t})},options:{},subscribe:function(e){l=e},success:function(e,t,n){return o({type:f.success,iconClass:i().iconClasses.success,message:e,optionsOverride:n,title:t})},version:"",warning:function(e,t,n){return o({type:f.warning,iconClass:i().iconClasses.warning,message:e,optionsOverride:n,title:t})}};return p}()}))}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)}),$((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(document).ajaxError((function(e,t){401===t.status&&(window.location="/"),419===t.status&&(window.location=location.toString())}))})),toastr.options.timeOut=3e3;let CreatePromise=function(e){let t,n=!1,a=[];return e((function(e){n=!0,t=e,a.forEach((function(e){e()}))})),{then:function(e){n?e(t):a.push((function(){e(t)}))}}};function recaptchaLoadCallback(){grecaptchaWidget=grecaptcha.render(document.getElementById("recaptcha-render"),{sitekey:recaptchaSiteKey,callback:function(e){grecaptchaWidgetResolver(e)},size:"invisible"})}function loadRecapchaAndSubmit(e){if("undefined"==typeof grecaptcha)return;CreatePromise((function(e){grecaptchaWidgetResolver=e})).then((function(t){e(t)})),grecaptcha.reset(grecaptchaWidget),grecaptcha.execute(grecaptchaWidget).catch((function(e){console.err(e)}))}function recapchaRenderTokenToForm(e){return"undefined"==typeof grecaptcha||(loadRecapchaAndSubmit((function(t){let n=document.createElement("input");n.name="g-recaptcha-response",n.value=t,n.type="hidden",e.appendChild(n),HTMLFormElement.prototype.submit.call(e)})),!1)}$((function(){function sendMessageByResponse(e,t=!1,n=null){t?void 0!==show_notify&&"function"==typeof show_notify&&show_notify(e):void 0!==show_message&&"function"==typeof show_message&&show_message(e,!1,n)}function sendRequestFormAjax(form,data,btnsubmit,currentText,currentIcon,captchaToken=null){let submitSuccess=form.data("success"),notify=form.data("notify")||!1;captchaToken&&data.append("g-recaptcha-response",captchaToken),$.ajax({type:form.attr("method"),url:form.attr("action"),dataType:"json",data:data,cache:!1,contentType:!1,processData:!1}).done((function(response){if(sendMessageByResponse(response,notify,form),submitSuccess){let handler=eval(submitSuccess)(form,response);if(!1===handler)return!1}return response.data.redirect?(setTimeout((function(){window.location=response.data.redirect}),1e3),!1):(btnsubmit.find("i").attr("class",currentIcon),btnsubmit.prop("disabled",!1),btnsubmit.data("loading-text")&&btnsubmit.html(currentText),response.status,!1)})).fail((function(e){return btnsubmit.find("i").attr("class",currentIcon),btnsubmit.prop("disabled",!1),btnsubmit.data("loading-text")&&btnsubmit.html(currentText),sendMessageByResponse(e,notify,form),!1}))}$(document).on("submit",".form-ajax",(function(e){if(e.isDefaultPrevented())return!1;e.preventDefault();let t=$(this),n=new FormData(t[0]),a=t.find("button[type=submit]"),s=a.html(),o=a.find("i").attr("class");if(a.find("i").attr("class","fa fa-spinner fa-spin"),a.prop("disabled",!0),a.data("loading-text")&&a.html('<i class="fa fa-spinner fa-spin"></i> '+a.data("loading-text")),"undefined"!=typeof grecaptcha)return loadRecapchaAndSubmit((function(e){sendRequestFormAjax(t,n,a,s,o,e)})),!1;sendRequestFormAjax(t,n,a,s,o)}))}));
